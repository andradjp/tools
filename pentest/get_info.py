import socket
import fcntl
import struct
import urllib.request, urllib.error


def get_ip(inter):

    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    ip_addr = socket.inet_ntoa(fcntl.ioctl(s.fileno(), 0x8915, struct.pack('256s', inter[:15]))[20:24])
    return ip_addr


def get_public_ip():
    try:
        with urllib.request.urlopen('http://ip.42.pl/raw') as response:
            public_ip = response.read()

    except urllib.error.HTTPError as error:
        print('There was an error trying to get your Public IP: %s') % (error)

    except urllib.error.URLError as error:
        print('There was an error trying to get your Public IP: %s') % (error)

    return public_ip


get_public_ip()